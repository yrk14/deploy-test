<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Single File Frontend</title>
    <script type="module">
      import React, { useEffect, useState } from "https://esm.sh/react";
      import { createRoot } from "https://esm.sh/react-dom/client";

      const API = "https://deploy-test-1-we0q.onrender.com"; // 🔒 backend URL

      function App() {
        const [message, setMessage] = useState("");
        const [users, setUsers] = useState([]);

        useEffect(() => {
          fetch(`${API}/`)
            .then((r) => r.json())
            .then((d) => setMessage(d.message))
            .catch(() => setMessage("⚠️ backend not reachable"));

          fetch(`${API}/users`)
            .then((r) => r.json())
            .then(setUsers)
            .catch(() => setUsers([]));
        }, []);

        return (
          React.createElement("div", { style: { fontFamily: "system-ui", padding: "24px" } },
            React.createElement("h1", null, "Frontend is working ✅"),
            React.createElement("p", null, `Backend URL: ${API}`),
            React.createElement("p", null, `Backend says: ${message}`),
            React.createElement("h2", null, "Users"),
            React.createElement("ul", null, users.map(u =>
              React.createElement("li", { key: u.id }, u.name)
            ))
          )
        );
      }

      createRoot(document.getElementById("root"))
        .render(React.createElement(App));
    </script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
